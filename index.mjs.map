{"version":3,"file":"index.mjs","sources":["../lib/main.js"],"sourcesContent":["/**\n* @license Apache-2.0\n*\n* Copyright (c) 2025 The Stdlib Authors.\n*\n* Licensed under the Apache License, Version 2.0 (the \"License\");\n* you may not use this file except in compliance with the License.\n* You may obtain a copy of the License at\n*\n*    http://www.apache.org/licenses/LICENSE-2.0\n*\n* Unless required by applicable law or agreed to in writing, software\n* distributed under the License is distributed on an \"AS IS\" BASIS,\n* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n* See the License for the specific language governing permissions and\n* limitations under the License.\n*/\n\n/* eslint-disable no-invalid-this, no-restricted-syntax */\n\n'use strict';\n\n// MODULES //\n\nimport isArrayBuffer from '@stdlib/assert-is-arraybuffer';\nimport isObject from '@stdlib/assert-is-object';\nimport hasProp from '@stdlib/assert-has-property';\nimport setReadOnly from '@stdlib/utils-define-nonenumerable-read-only-property';\nimport setReadWriteAccessor from '@stdlib/utils-define-nonenumerable-read-write-accessor';\nimport propertyDescriptor from '@stdlib/utils-property-descriptor';\nimport { factory as contains } from '@stdlib/array-base-assert-contains';\nimport join from '@stdlib/array-base-join';\nimport objectAssign from '@stdlib/object-assign';\nimport inherit from '@stdlib/utils-inherit';\nimport resolveStr from '@stdlib/stats-base-ztest-alternative-resolve-str';\nimport resolveEnum from '@stdlib/stats-base-ztest-alternative-resolve-enum';\nimport structFactory from '@stdlib/stats-base-ztest-one-sample-results-struct-factory';\nimport res2json from '@stdlib/stats-base-ztest-one-sample-results-to-json';\nimport res2str from '@stdlib/stats-base-ztest-one-sample-results-to-string';\nimport format from '@stdlib/error-tools-fmtprodmsg';\n\n\n// VARIABLES //\n\nvar DTYPES = [\n\t'float64',\n\t'float32'\n];\n\nvar isDataType = contains( DTYPES );\n\n\n// MAIN //\n\n/**\n* Returns a constructor for creating a one-sample Z-test results object.\n*\n* @param {string} dtype - storage data type for floating-point values\n* @throws {TypeError} first argument must be a supported data type\n* @returns {Function} constructor\n*\n* @example\n* import Float64Array from '@stdlib/array-float64';\n*\n* var Results = factory( 'float64' );\n*\n* var results = new Results();\n* // returns <Results>\n*\n* results.alternative = 'two-sided';\n* results.alpha = 0.05;\n* results.nullValue = 0.0;\n* results.pValue = 0.3374;\n* results.statistic = 0.9592;\n* results.sd = 0.4535;\n* results.ci = new Float64Array( [ -0.0316, 0.0923 ] );\n* results.rejected = false;\n*\n* var str = results.toString();\n* // returns <string>\n*/\nfunction factory( dtype ) {\n\tvar alternativeDescriptor;\n\tvar Struct;\n\n\tif ( !isDataType( dtype ) ) {\n\t\tthrow new TypeError( format( 'invalid argument. First argument must be one of the following: \"%s\". Value: `%s`.', join( DTYPES, ', ' ), dtype ) );\n\t}\n\n\t// Create a struct constructor:\n\tStruct = structFactory( dtype );\n\n\t// Cache a reference to a property descriptor on the parent prototype so that we can intercept the return value:\n\talternativeDescriptor = propertyDescriptor( Struct.prototype, 'alternative' );\n\n\t/**\n\t* Returns a one-sample Z-test results object.\n\t*\n\t* @private\n\t* @constructor\n\t* @param {(ArrayBuffer|Object)} [arg] - underlying byte buffer or a data object\n\t* @param {NonNegativeInteger} [byteOffset] - byte offset\n\t* @param {NonNegativeInteger} [byteLength] - maximum byte length\n\t* @throws {TypeError} first argument must be an ArrayBuffer or a data object\n\t* @returns {Results} results object\n\t*/\n\tfunction Results( arg, byteOffset, byteLength ) {\n\t\tvar nargs;\n\t\tvar args;\n\t\tvar v;\n\t\tvar i;\n\n\t\tnargs = arguments.length;\n\t\tif ( !( this instanceof Results ) ) {\n\t\t\tif ( nargs === 0 ) {\n\t\t\t\treturn new Results();\n\t\t\t}\n\t\t\tif ( nargs === 1 ) {\n\t\t\t\treturn new Results( arg );\n\t\t\t}\n\t\t\tif ( nargs === 2 ) {\n\t\t\t\treturn new Results( arg, byteOffset );\n\t\t\t}\n\t\t\treturn new Results( arg, byteOffset, byteLength );\n\t\t}\n\t\targs = [];\n\t\tif ( nargs > 0 ) {\n\t\t\tif ( isArrayBuffer( arg ) ) {\n\t\t\t\tfor ( i = 0; i < nargs; i++ ) {\n\t\t\t\t\targs.push( arguments[ i ] );\n\t\t\t\t}\n\t\t\t} else if ( isObject( arg ) ) {\n\t\t\t\tif ( hasProp( arg, 'alternative' ) ) {\n\t\t\t\t\targs.push( objectAssign( {}, arg ) );\n\t\t\t\t\tv = resolveEnum( args[ 0 ].alternative );\n\t\t\t\t\targs[ 0 ].alternative = ( v === null ) ? NaN : v;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new TypeError( format( 'invalid argument. First argument must be an ArrayBuffer or a data object. Value: `%s`.', arg ) );\n\t\t\t}\n\t\t}\n\t\t// Call the parent constructor...\n\t\tStruct.apply( this, args );\n\t\treturn this;\n\t}\n\n\t/*\n\t* Inherit from the parent constructor.\n\t*/\n\tinherit( Results, Struct );\n\n\t/**\n\t* Test name.\n\t*\n\t* @private\n\t* @name method\n\t* @memberof Results.prototype\n\t* @type {string}\n\t* @default 'One-sample Z-test'\n\t*/\n\tsetReadOnly( Results.prototype, 'method', 'One-sample Z-test' );\n\n\t/**\n\t* Alternative hypothesis.\n\t*\n\t* @private\n\t* @name alternative\n\t* @memberof Results.prototype\n\t* @type {string}\n\t*/\n\tsetReadWriteAccessor( Results.prototype, 'alternative', getAlternative, setAlternative );\n\n\t/**\n\t* Serializes a results object as a string.\n\t*\n\t* ## Notes\n\t*\n\t* -   Example output:\n\t*\n\t*     ```text\n\t*\n\t*     One-sample Z-test\n\t*\n\t*     Alternative hypothesis: True mean is less than 1.0\n\t*\n\t*        pValue: 0.0406\n\t*        statistic: 9.9901\n\t*        95% confidence interval: [9.7821, 10.4451]\n\t*\n\t*     Test Decision: Reject null in favor of alternative at 5% significance level\n\t*\n\t*     ```\n\t*\n\t* @private\n\t* @name toString\n\t* @memberof Results.prototype\n\t* @type {Function}\n\t* @param {Options} [opts] - options object\n\t* @param {PositiveInteger} [opts.digits=4] - number of digits after the decimal point\n\t* @param {boolean} [opts.decision=true] - boolean indicating whether to show the test decision\n\t* @throws {TypeError} options argument must be an object\n\t* @throws {TypeError} must provide valid options\n\t* @returns {string} serialized results\n\t*/\n\tsetReadOnly( Results.prototype, 'toString', function toString( opts ) {\n\t\tif ( arguments.length ) {\n\t\t\treturn res2str( this, opts );\n\t\t}\n\t\treturn res2str( this );\n\t});\n\n\t/**\n\t* Serializes a results object as a JSON object.\n\t*\n\t* ## Notes\n\t*\n\t* -   `JSON.stringify()` implicitly calls this method when stringifying a `Results` instance.\n\t*\n\t* @private\n\t* @name toJSON\n\t* @memberof Results.prototype\n\t* @type {Function}\n\t* @returns {Object} serialized object\n\t*/\n\tsetReadOnly( Results.prototype, 'toJSON', function toJSON() {\n\t\treturn res2json( this );\n\t});\n\n\t/**\n\t* Returns a DataView of a results object.\n\t*\n\t* @private\n\t* @name toDataView\n\t* @memberof Results.prototype\n\t* @type {Function}\n\t* @returns {DataView} DataView\n\t*/\n\tsetReadOnly( Results.prototype, 'toDataView', function toDataView() {\n\t\treturn Struct.viewOf( this );\n\t});\n\n\treturn Results;\n\n\t/**\n\t* Returns the alternative hypothesis.\n\t*\n\t* @private\n\t* @returns {string} alternative hypothesis\n\t*/\n\tfunction getAlternative() {\n\t\treturn resolveStr( alternativeDescriptor.get.call( this ) );\n\t}\n\n\t/**\n\t* Sets the alternative hypothesis.\n\t*\n\t* @private\n\t* @param {string} value - alternative hypothesis\n\t*/\n\tfunction setAlternative( value ) {\n\t\talternativeDescriptor.set.call( this, resolveEnum( value ) );\n\t}\n}\n\n\n// EXPORTS //\n\nexport default factory;\n"],"names":["DTYPES","isDataType","contains","factory","dtype","alternativeDescriptor","Struct","TypeError","format","join","Results","arg","byteOffset","byteLength","nargs","args","v","i","arguments","length","this","isArrayBuffer","push","isObject","hasProp","objectAssign","resolveEnum","alternative","NaN","apply","structFactory","propertyDescriptor","prototype","inherit","setReadOnly","setReadWriteAccessor","resolveStr","get","call","value","set","opts","res2str","res2json","viewOf"],"mappings":";;wnDA4CA,IAAIA,EAAS,CACZ,UACA,WAGGC,EAAaC,EAAUF,GAgC3B,SAASG,EAASC,GACjB,IAAIC,EACAC,EAEJ,IAAML,EAAYG,GACjB,MAAM,IAAIG,UAAWC,EAAQ,oFAAqFC,EAAMT,EAAQ,MAAQI,IAoBzI,SAASM,EAASC,EAAKC,EAAYC,GAClC,IAAIC,EACAC,EACAC,EACAC,EAGJ,GADAH,EAAQI,UAAUC,SACVC,gBAAgBV,GACvB,OAAe,IAAVI,EACG,IAAIJ,EAEG,IAAVI,EACG,IAAIJ,EAASC,GAEN,IAAVG,EACG,IAAIJ,EAASC,EAAKC,GAEnB,IAAIF,EAASC,EAAKC,EAAYC,GAGtC,GADAE,EAAO,GACFD,EAAQ,EACZ,GAAKO,EAAeV,GACnB,IAAMM,EAAI,EAAGA,EAAIH,EAAOG,IACvBF,EAAKO,KAAMJ,UAAWD,QAEjB,KAAKM,EAAUZ,GAOrB,MAAM,IAAIJ,UAAWC,EAAQ,yFAA0FG,IANlHa,EAASb,EAAK,iBAClBI,EAAKO,KAAMG,EAAc,CAAA,EAAId,IAC7BK,EAAIU,EAAaX,EAAM,GAAIY,aAC3BZ,EAAM,GAAIY,YAAsB,OAANX,EAAeY,IAAMZ,EAIhD,CAIF,OADAV,EAAOuB,MAAOT,KAAML,GACbK,IACP,CAiGD,OAvJAd,EAASwB,EAAe1B,GAGxBC,EAAwB0B,EAAoBzB,EAAO0B,UAAW,eAwD9DC,EAASvB,EAASJ,GAWlB4B,EAAaxB,EAAQsB,UAAW,SAAU,qBAU1CG,EAAsBzB,EAAQsB,UAAW,eA+EzC,WACC,OAAOI,EAAY/B,EAAsBgC,IAAIC,KAAMlB,MACnD,IAQD,SAAyBmB,GACxBlC,EAAsBmC,IAAIF,KAAMlB,KAAMM,EAAaa,GACnD,IAzDDL,EAAaxB,EAAQsB,UAAW,YAAY,SAAmBS,GAC9D,OAAKvB,UAAUC,OACPuB,EAAStB,KAAMqB,GAEhBC,EAAStB,KAClB,IAeCc,EAAaxB,EAAQsB,UAAW,UAAU,WACzC,OAAOW,EAAUvB,KACnB,IAWCc,EAAaxB,EAAQsB,UAAW,cAAc,WAC7C,OAAO1B,EAAOsC,OAAQxB,KACxB,IAEQV,CAqBR"}